<h2>{{ new ? 'Créer une nouvelle facture' : 'Mettre une facture à jour' }}</h2>
<form (ngSubmit)="submit(model)" #model="ngForm" [ngClass]="{'submitted': model.form.valid}">
	<app-company-combobox [(selection)]="invoice.client"></app-company-combobox>
	<mat-form-field>
		<input matInput type="number" id="amount" name="amount" placeholder="Montant" 
			[(ngModel)]="invoice.amount" min="O" step=0.05 required />
	</mat-form-field>
	<mat-form-field>
		<input matInput [matDatepicker]="pickerCrea" placeholder="Date de création"
			[(ngModel)]="invoice.mdCreation" name="creationDate" disabled required>
		<mat-datepicker-toggle matSuffix [for]="pickerCrea"></mat-datepicker-toggle>
		<mat-datepicker disabled="false" #pickerCrea></mat-datepicker>
	</mat-form-field>
	<mat-form-field>
		<input matInput id="label" name="label" placeholder="Label" 
			[(ngModel)]="invoice.label" required />
	</mat-form-field>
	<mat-form-field *ngIf="invoice.received">
		<input matInput [matDatepicker]="pickerRec" placeholder="Reception du paiement"
			[(ngModel)]="invoice.mdReception" name="receptionDate" disabled required>
		<mat-datepicker-toggle matSuffix [for]="pickerRec"></mat-datepicker-toggle>
		<mat-datepicker disabled="false" #pickerRec></mat-datepicker>
	</mat-form-field>
	<section>
		<mat-checkbox id="pending" name="pending" [(ngModel)]="invoice.pending">
			En attente
		</mat-checkbox>
		<mat-checkbox id="received" name="received" [(ngModel)]="invoice.received">
			Payée
		</mat-checkbox>
		<mat-checkbox id="travelC" name="travelC" [(ngModel)]="invoice.travelCosts">
			Frais
		</mat-checkbox>
	</section>
	<button mat-raised-button color="primary" [disabled]="!model.form.valid">Valider</button>
</form>
<div class="document">
	<app-invoice-docgen [invoice]="invoice"></app-invoice-docgen>
</div>